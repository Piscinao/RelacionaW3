<div class="animated fadeIn">
  <div class="card">
    <div class="card-header">
        <strong>  Áreas </strong>
    </div>
    <div class="card-body">
      <div class="d-flex">
  
        <div class="form-inline mr-auto">
          <div class="form-group mb-2">
            Filtro: <input type="text" 
            class="form-control mr-2" 
            placeholder="Buscar"
           >
            <button class="btn btn-outline-sucess">Buscar</button>
          </div>
        </div>
        <div>
          <button class="btn btn-outline-primary" (click)="novoArea(template)">
            <i class="fa fa-plus-circle"></i>&nbsp;
            Nova Área</button>
          </div>
          
        </div>
        <h3>Lista: {{filtroLista}}</h3>
        <table class="table table-striped">
          <thead class="thead-light">
            <tr>
              <th>
                <!-- <button class="btn btn-outline-primary"
                (click)='alterarImagem()'>
                <i class="{{mostrarImagem ? 'fa fa-eye-slash' : 'fa fa-eye'}}"></i>
                  {{mostrarImagem ? 'Ocultar' : 'Mostrar'}}
                
              </button> -->
              
            </th>
            
            <th>Descrição</th>
            <th>Nome do contato</th>
            <th>Característica</th>
            <th>Data</th>
            <th>Meio de Contato</th>
            <th>Fonte</th>
            <th colspan="2" class="text-center">Opções</th>
          </tr>
        </thead>
        <tbody *ngIf="areas && areas.length">
          <!-- diretiva estrututal ng if, ngshow-->
          <tr *ngFor="let area of areasFiltrados">
            <td>
              <!--Diretiva Estrutural-->
              <!-- <img *ngIf='mostrarImagem'
              src='http://localhost:5000/resources/images/{{area.imagemURL}}?_ts={{dataAtual}}'
              [style.width.px]="imagemLargura"
              [style.margin.px]="imagemMargem"> -->
              <!--Property Binding-->
            </td>
           
            <!--binding entre a propriedade da classe e o template-->
            <!--Interpolação-->
          
            <td>{{area.nome}}</td>
     
            <!-- <td>
              <div *ngIf="!area.lotes.length">
                Não informado
              </div>
              <div *ngIf="area.lotes.length">
                {{area.lotes[0].nome| uppercase}}
              </div>
            </td> -->
            
            <td>
              <div class="btn-group">
                <button class="btn btn-sm btn-success" 
                tooltip="Editar" (click)="editarArea(area, template)">
                <i class="fa fa-edit"></i>
              </button>    
              <button class="btn btn-sm btn-danger"
              tooltip="Excluir" (click)="openModalDelete(area)">
              <i class="fa fa-eraser"></i>   
            </button> 
          </div>
        </td>
       
      </tr>
      </tbody>
      <tfoot *ngIf="!areas">
        <tr>
          <td colspan="7" class="text-center">
            <h4>
              Nenhum area encontrado!
            </h4>
          </td>
        </tr>
      </tfoot>
      </table>
      </div>


      <div bsModal #template="bs-modal" [config]="{ignoreBackdropClick: true, keyboard: false, animated: true}  " class="modal animated fadeIn"  tabindex="-1"
      role="dialog" aria-labelledby="dialog-sizes-name1">
      <div class="modal-dialog modal-lg modal-primary">
        <div class="modal-content">
          <div class="modal-header">
            <h4 id="dialog-sizes-name1" class="modal-title pull-left">Registrar Area</h4>
            <button type="button"  class="close pull-right" (click)="template.hide()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <form [formGroup]= "registerForm">
                  <div class="form-row">
                      <div class="col-md-15 mb-4">
                         
                          <tabset>
                            <tab>
                              <ng-template tabHeading><i class="icon-note">-Informações Gerais</i></ng-template>
                              <div class="form-group col-md-12">
                                  <label>Nomes</label>
                                  <input type="text" class="form-control" 
                                  [ngClass]="{'is-invalid': registerForm.get('nome').errors
                                  && registerForm.get('nome').touched}"
                                  formControlName="nome"  placeholder="Insira a descrição">
                                  <div *ngIf="registerForm.get('nome').hasError('required') 
                                  && registerForm.get('nome').touched" class="invalid-feedback">
                                  A descrição é obrigatória.
                                </div>
                                
                                <div *ngIf="registerForm.get('nome').hasError('minlength') 
                                && registerForm.get('nome').touched" class="invalid-feedback">
                                nome deve ter no mínimo 4 caracteres.
                              </div>
                              
                              <div *ngIf="registerForm.get('nome').hasError('maxlength') 
                              && registerForm.get('nome').touched" class="invalid-feedback">
                              nome deve ter no máximo 50 caracteres.
                            </div>
                            </div>

                            </tab>
                            <tab>
                              <ng-template tabHeading><i class="icon-action-undo"></i>-Resposta Tratativa</ng-template>
                              
                              TESTE
                            </tab>
                            <tab>
                              <ng-template tabHeading><i class="icon-pie-chart"></i></ng-template>
                              TESTE
                            </tab>
                          </tabset>
                        </div>
                      </div>
                   
  
          
               
                

                
                <!-- <div class="form-group col-md-9">
                  <label>Imagem</label>
                  <table>
                    <tr>
                      <td> <button class="btn btn-success" (click)="file.click()">
                        Enviar Imagem
          
                      </button>
                  
                      <input type="file" #file
                      [ngClass]="{'is-invalid': registerForm.get('imagemURL').errors
                      && registerForm.get('imagemURL').touched}" (change)="onFileChange($event)"
                      class="form-control" formControlName="imagemURL" placeholder=""
                      style="display: none"> </td>
                    </tr>
                  </table>
                  
                  <div *ngIf="registerForm.get('imagemURL').hasError('required') 
                  && registerForm.get('imagemURL').touched" class="invalid-feedback">
                  Imagem é obrigatório
                  
                </div>
                </div></div>   -->
                
                
                
                </form>
          </div>
          
          <div class="modal-footer">
            <button class="btn btn-secondary" (click)="template.hide()">
                <i class="fa fa-ban"></i> 
              Fechar
            </button>
            <button class="btn btn-primary ml-auto" [disabled]="!registerForm.valid" (click)="salvarAlteracao(template)">
                <i class="fa fa-check"></i> 
              Salvar Alterações
            </button>
            
          </div>
        </div>
      </div>
      </div>
     
    </div>
  </div>


